{"ast":null,"code":"import { userService } from \"../../services\";\nimport { router } from \"../../helpers\";\nconst user = JSON.parse(localStorage.getItem(\"user\"));\nconst state = user ? {\n  status: {\n    loggedIn: true\n  },\n  user\n} : {\n  status: {},\n  user: null\n};\nconst actions = {\n  login({\n    dispatch,\n    commit\n  }, {\n    username,\n    password\n  }) {\n    commit(\"loginRequest\", {\n      username\n    });\n    userService.login(username, password).then(user => {\n      commit(\"loginSuccess\", user);\n      router.push(\"/\");\n    }, error => {\n      commit(\"loginFailure\", error);\n      dispatch(\"alert/error\", error, {\n        root: true\n      });\n    });\n  },\n\n  logout({\n    commit\n  }) {\n    userService.logout();\n    commit(\"logout\");\n  },\n\n  register({\n    dispatch,\n    commit\n  }, user) {\n    commit(\"registerRequest\", user);\n    userService.register(user).then(user => {\n      commit(\"registerSuccess\", user);\n      router.push(\"/login\");\n      setTimeout(() => {\n        // hiển thị message thành công sau redirect sang trang\n        dispatch(\"alert/success\", \"Registration successful\", {\n          root: true\n        });\n      });\n    }, error => {\n      commit(\"registerFailure\", error);\n      dispatch(\"alert/error\", error, {\n        root: true\n      });\n    });\n  }\n\n};\nconst mutations = {\n  loginRequest(state, user) {\n    state.status = {\n      loggingIn: true\n    };\n    state.user = user;\n  },\n\n  loginSuccess(state, user) {\n    state.status = {\n      loggedIn: true\n    };\n    state.user = user;\n  },\n\n  loginFailure(state) {\n    state.status = {};\n    state.user = null;\n  },\n\n  logout(state) {\n    state.status = {};\n    state.user = null;\n  } // registerRequest(state, user) {\n  //   state.status = { registering: true };\n  // },\n  // registerSuccess(state, user) {\n  //   state.status = {};\n  // },\n  // registerFailure(state, error) {\n  //   state.status = {};\n  // },\n\n\n};\nexport const account = {\n  namespaced: true,\n  state,\n  actions,\n  mutations\n};","map":{"version":3,"names":["userService","router","user","JSON","parse","localStorage","getItem","state","status","loggedIn","actions","login","dispatch","commit","username","password","then","push","error","root","logout","register","setTimeout","mutations","loginRequest","loggingIn","loginSuccess","loginFailure","account","namespaced"],"sources":["/home/dlinh/Documents/BaseProject/base-project/src/store/modules/account.js"],"sourcesContent":["import { userService } from \"../../services\";\nimport { router } from \"../../helpers\";\n\nconst user = JSON.parse(localStorage.getItem(\"user\"));\nconst state = user\n  ? { status: { loggedIn: true }, user }\n  : { status: {}, user: null };\n\nconst actions = {\n  login({ dispatch, commit }, { username, password }) {\n    commit(\"loginRequest\", { username });\n\n    userService.login(username, password).then(\n      (user) => {\n        commit(\"loginSuccess\", user);\n        router.push(\"/\");\n      },\n      (error) => {\n        commit(\"loginFailure\", error);\n        dispatch(\"alert/error\", error, { root: true });\n      }\n    );\n  },\n  logout({ commit }) {\n    userService.logout();\n    commit(\"logout\");\n  },\n  register({ dispatch, commit }, user) {\n    commit(\"registerRequest\", user);\n\n    userService.register(user).then(\n      (user) => {\n        commit(\"registerSuccess\", user);\n        router.push(\"/login\");\n        setTimeout(() => {\n          // hiển thị message thành công sau redirect sang trang\n          dispatch(\"alert/success\", \"Registration successful\", { root: true });\n        });\n      },\n      (error) => {\n        commit(\"registerFailure\", error);\n        dispatch(\"alert/error\", error, { root: true });\n      }\n    );\n  },\n};\n\nconst mutations = {\n  loginRequest(state, user) {\n    state.status = { loggingIn: true };\n    state.user = user;\n  },\n  loginSuccess(state, user) {\n    state.status = { loggedIn: true };\n    state.user = user;\n  },\n  loginFailure(state) {\n    state.status = {};\n    state.user = null;\n  },\n  logout(state) {\n    state.status = {};\n    state.user = null;\n  },\n  // registerRequest(state, user) {\n  //   state.status = { registering: true };\n  // },\n  // registerSuccess(state, user) {\n  //   state.status = {};\n  // },\n  // registerFailure(state, error) {\n  //   state.status = {};\n  // },\n};\n\nexport const account = {\n  namespaced: true,\n  state,\n  actions,\n  mutations,\n};\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,gBAA5B;AACA,SAASC,MAAT,QAAuB,eAAvB;AAEA,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb;AACA,MAAMC,KAAK,GAAGL,IAAI,GACd;EAAEM,MAAM,EAAE;IAAEC,QAAQ,EAAE;EAAZ,CAAV;EAA8BP;AAA9B,CADc,GAEd;EAAEM,MAAM,EAAE,EAAV;EAAcN,IAAI,EAAE;AAApB,CAFJ;AAIA,MAAMQ,OAAO,GAAG;EACdC,KAAK,CAAC;IAAEC,QAAF;IAAYC;EAAZ,CAAD,EAAuB;IAAEC,QAAF;IAAYC;EAAZ,CAAvB,EAA+C;IAClDF,MAAM,CAAC,cAAD,EAAiB;MAAEC;IAAF,CAAjB,CAAN;IAEAd,WAAW,CAACW,KAAZ,CAAkBG,QAAlB,EAA4BC,QAA5B,EAAsCC,IAAtC,CACGd,IAAD,IAAU;MACRW,MAAM,CAAC,cAAD,EAAiBX,IAAjB,CAAN;MACAD,MAAM,CAACgB,IAAP,CAAY,GAAZ;IACD,CAJH,EAKGC,KAAD,IAAW;MACTL,MAAM,CAAC,cAAD,EAAiBK,KAAjB,CAAN;MACAN,QAAQ,CAAC,aAAD,EAAgBM,KAAhB,EAAuB;QAAEC,IAAI,EAAE;MAAR,CAAvB,CAAR;IACD,CARH;EAUD,CAda;;EAedC,MAAM,CAAC;IAAEP;EAAF,CAAD,EAAa;IACjBb,WAAW,CAACoB,MAAZ;IACAP,MAAM,CAAC,QAAD,CAAN;EACD,CAlBa;;EAmBdQ,QAAQ,CAAC;IAAET,QAAF;IAAYC;EAAZ,CAAD,EAAuBX,IAAvB,EAA6B;IACnCW,MAAM,CAAC,iBAAD,EAAoBX,IAApB,CAAN;IAEAF,WAAW,CAACqB,QAAZ,CAAqBnB,IAArB,EAA2Bc,IAA3B,CACGd,IAAD,IAAU;MACRW,MAAM,CAAC,iBAAD,EAAoBX,IAApB,CAAN;MACAD,MAAM,CAACgB,IAAP,CAAY,QAAZ;MACAK,UAAU,CAAC,MAAM;QACf;QACAV,QAAQ,CAAC,eAAD,EAAkB,yBAAlB,EAA6C;UAAEO,IAAI,EAAE;QAAR,CAA7C,CAAR;MACD,CAHS,CAAV;IAID,CARH,EASGD,KAAD,IAAW;MACTL,MAAM,CAAC,iBAAD,EAAoBK,KAApB,CAAN;MACAN,QAAQ,CAAC,aAAD,EAAgBM,KAAhB,EAAuB;QAAEC,IAAI,EAAE;MAAR,CAAvB,CAAR;IACD,CAZH;EAcD;;AApCa,CAAhB;AAuCA,MAAMI,SAAS,GAAG;EAChBC,YAAY,CAACjB,KAAD,EAAQL,IAAR,EAAc;IACxBK,KAAK,CAACC,MAAN,GAAe;MAAEiB,SAAS,EAAE;IAAb,CAAf;IACAlB,KAAK,CAACL,IAAN,GAAaA,IAAb;EACD,CAJe;;EAKhBwB,YAAY,CAACnB,KAAD,EAAQL,IAAR,EAAc;IACxBK,KAAK,CAACC,MAAN,GAAe;MAAEC,QAAQ,EAAE;IAAZ,CAAf;IACAF,KAAK,CAACL,IAAN,GAAaA,IAAb;EACD,CARe;;EAShByB,YAAY,CAACpB,KAAD,EAAQ;IAClBA,KAAK,CAACC,MAAN,GAAe,EAAf;IACAD,KAAK,CAACL,IAAN,GAAa,IAAb;EACD,CAZe;;EAahBkB,MAAM,CAACb,KAAD,EAAQ;IACZA,KAAK,CAACC,MAAN,GAAe,EAAf;IACAD,KAAK,CAACL,IAAN,GAAa,IAAb;EACD,CAhBe,CAiBhB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;;AAzBgB,CAAlB;AA4BA,OAAO,MAAM0B,OAAO,GAAG;EACrBC,UAAU,EAAE,IADS;EAErBtB,KAFqB;EAGrBG,OAHqB;EAIrBa;AAJqB,CAAhB"},"metadata":{},"sourceType":"module"}